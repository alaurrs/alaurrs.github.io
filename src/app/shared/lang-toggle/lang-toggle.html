<div class="relative">
  <button
    class="rounded-full px-3 py-1 border text-sm flex items-center gap-2"
    (click)="toggleMenu()"
  >
    <span>{{ getCurrentLanguage()?.flag }}</span>
    <span>{{ (getCurrentLanguage()?.code ?? 'en').toUpperCase() }}</span>
    <span class="text-xs">{{ isOpen() ? '▲' : '▼' }}</span>
  </button>

  @if (isOpen()) {
    <div class="absolute right-0 mt-2 w-40 bg-[var(--color-bg-light)] dark:bg-[var(--color-bg-dark)] border border-[var(--color-border)] rounded-lg shadow-lg overflow-hidden z-50">
      @for (lang of languages; track lang.code) {
        <button
          class="w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-800 flex items-center gap-2 transition-colors"
          [class.bg-gray-100]="lang.code === current()"
          [class.dark:bg-gray-800]="lang.code === current()"
          (click)="selectLanguage(lang.code)"
        >
          <span>{{ lang.flag }}</span>
          <span>{{ lang.label }}</span>
        </button>
      }
    </div>
  }
</div>

