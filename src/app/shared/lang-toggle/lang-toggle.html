<div class="relative">
  <button
    class="rounded-full px-3 py-1 border text-sm flex items-center gap-2"
    (click)="toggleMenu()"
  >
    <span>{{ getCurrentLanguage()?.flag }}</span>
    <span>{{ (getCurrentLanguage()?.code ?? 'en').toUpperCase() }}</span>
    <span class="text-xs">{{ isOpen() ? '▲' : '▼' }}</span>
  </button>

  @if (isOpen()) {
    <div class="absolute right-0 mt-2 w-40 text-[var(--color-text)] bg-[var(--color-bg)] border border-[var(--color-border)] rounded-lg shadow-lg overflow-hidden z-50">
      @for (lang of languages; track lang.code) {
        <button
          class="w-full px-4 py-2 text-left text-sm hover:text-[var(--color-text-button-primary)] hover:bg-[var(--color-primary)] flex items-center gap-2 transition-colors"
          [class.bg-[var(--color-primary)]]="lang.code === current()"
          [class.text-[var(--color-text-button-primary)]]="lang.code === current()"
          (click)="selectLanguage(lang.code)"
        >
          <span>{{ lang.flag }}</span>
          <span>{{ lang.label }}</span>
        </button>
      }
    </div>
  }
</div>

